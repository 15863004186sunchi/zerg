syntax = "proto3";

option objc_class_prefix = "HLW";

package protos;

service Crawl {
  rpc Crawl (CrawlRequest) returns (CrawlResponse) {}
}

message CrawlRequest {
  string url = 1;  // 以 http:// 或者 https:// 开头的网址
  int64 timeout = 2;  // 抓取超时限制，单位毫秒，设为 0 时无超时
  int64 crawl_frequency = 3;  // 单位毫秒，当页面抓取时间比当前时间早超过 crawl_frequency（含）时重新抓取，当该值为 0 时始终重新抓取
  bool only_return_metadata = 4;
}

message CrawlResponse {
  string content = 1;
  bool is_fresh_crawl = 2;  // 是否是在这次请求中抓取的
  Metadata metadata = 3;
}

message Metadata {
  uint32 length = 1;
  int64 last_crawl_timestamp = 2;
}
